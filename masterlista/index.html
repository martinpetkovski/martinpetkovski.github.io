<!DOCTYPE html>
<html lang="mk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Македонска Музичка Мастер Листа</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600&family=Montserrat:wght@600&family=Bungee&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="desktop.css" media="screen and (min-width: 601px)">
    <link rel="stylesheet" href="mobile.css" media="screen and (max-width: 600px)">
</head>
<body class="compact">
    <header>
        <div class="header-content">
            <div class="logo-title-group">
                <span class="site-logo-text">MMM</span>
                <div class="title-group">
                    <h1>Македонска Музичка Мастер Листа</h1>
                    <div class="subtitle-stats">
                        <span>Листата содржи <strong id="total-bands">0</strong> артисти</span>
                        <span class="separator">•</span>
                        <span>Последна промена на <span id="last-modified">непознато</span></span>
                        <span class="separator">•</span>
                        <span>Податоците се лиценцирани со <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">Creative Commons Attribution</a></span>
                        <span class="separator">•</span>
                        <span>напојувано од <a class="xotel-link" href="https://discord.gg/fj6dJGhM" target="_blank">Xotel</a></span>
                    </div>
                </div>
            </div>
            <div class="header-buttons">
                <button id="add-band-btn" class="header-btn add-band edit-hidden"><i class="fas fa-plus"></i> Додај артист</button>
                <button id="toggle-filters" class="header-btn toggle-filters-btn" title="Прикажи/Сокриј филтри">
                    <i class="fas fa-filter"></i>
                </button>
                <button id="copy-data-btn" class="header-btn copy-data edit-hidden"><i class="fas fa-copy"></i> Копирај податоци</button>
                <button id="submit-pr-btn" class="header-btn request-change edit-hidden" title="Испрати барање за промена како PR" data-endpoint="https://muzichka-master-lista.deeeeelay.workers.dev">
                    <i class="fas fa-paper-plane"></i> Побарај промена
                </button>
                <a href="chart.html" class="header-btn chart-btn"><i class="fas fa-trophy"></i> Топ Листа</a>
                <a href="guide.html" class="header-btn guide-btn"><i class="fas fa-book"></i>Упатство</a>
            </div>
        </div>
    </header>
    <main>
        <div id="new-release-artists" class="new-release-artists"></div>
        <div class="controls">
            <input type="text" id="search-name" placeholder="Пребарај по име...">
            <select id="filter-city"></select>
            <select id="filter-genre"></select>
            <select id="filter-sounds-like"></select>
            <select id="filter-status"></select>
            <select id="filter-label"></select>
            <button id="clear-filters" class="clear-filters-btn" title="Исчисти филтри"><i class="fas fa-times"></i></button>
        </div>
        <div id="loading-bar" class="loading-bar">
            <div class="loading-progress"></div>
        </div>
        <div class="table-wrapper">
            <div class="table-scroll-container">
                <table>
                    <thead>
                        <tr>
                            <th>Име</th>
                            <th>Град</th>
                            <th>Жанр</th>
                            <th>Звучи како</th>
                            <th>Линкови</th>
                            <th class="play-column"></th>
                            <th><i class="fas fa-circle status-header-icon"></i></th>
                            <th class="edit-hidden">Акции</th>
                        </tr>
                    </thead>
                    <tbody id="band-table-body"></tbody>
                </table>
            </div>
        </div>

    </main>
    <div id="band-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close">×</span>
            <h2 id="modal-title">Додај артист</h2>
            <form id="band-form">
                <div class="form-group">
                    <label for="band-name">Име</label>
                    <input type="text" id="band-name" required>
                </div>
                <div class="form-group">
                    <label for="band-city">Град (одделени со запирки)</label>
                    <div class="autocomplete-wrapper">
                        <input type="text" id="band-city" autocomplete="off">
                        <div id="band-city-autocomplete" class="autocomplete-dropdown"></div>
                    </div>
                    <div id="band-city-tags" class="tag-container"></div>
                </div>
                <div class="form-group">
                    <label for="band-genre">Жанр (одделени со запирки)</label>
                    <div class="autocomplete-wrapper">
                        <input type="text" id="band-genre" autocomplete="off">
                        <div id="band-genre-autocomplete" class="autocomplete-dropdown"></div>
                    </div>
                    <div id="band-genre-tags" class="tag-container"></div>
                </div>
                <div class="form-group">
                    <label for="band-sounds-like">Звучи како (одделени со запирки)</label>
                    <div class="autocomplete-wrapper">
                        <input type="text" id="band-sounds-like" autocomplete="off">
                        <div id="band-sounds-like-autocomplete" class="autocomplete-dropdown"></div>
                    </div>
                    <div id="band-sounds-like-tags" class="tag-container"></div>
                </div>
                <div class="form-group">
                    <label for="band-status">Статус</label>
                    <select id="band-status">
                        <option value="Активен">Активен</option>
                        <option value="Неактивен">Неактивен</option>
                        <option value="Можеби">Можеби</option>
                        <option value="Непознато">Непознато</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="band-label">Ознака (одделени со запирки)</label>
                    <div class="autocomplete-wrapper">
                        <input type="text" id="band-label" autocomplete="off">
                        <div id="band-label-autocomplete" class="autocomplete-dropdown"></div>
                    </div>
                    <div id="band-label-tags" class="tag-container"></div>
                </div>
                <div class="form-group">
                    <label for="band-lastfm">Last.fm име</label>
                    <input type="text" id="band-lastfm">
                </div>
                <div class="form-group">
                    <label for="band-contact">Контакт (е-пошта)</label>
                    <input type="email" id="band-contact">
                </div>
                <div class="form-group">
                    <label>Линкови</label>
                    <div id="links-container"></div>
                    <button type="button" id="add-link-btn" class="add-link-btn">Додај линк</button>
                </div>
                <button type="submit" id="save-band-btn">Зачувај</button>
            </form>
        </div>
    </div>
    <!-- Custom Dialog Modals -->
    <div id="custom-dialog-modal" class="modal">
        <div class="modal-content dialog-modal-content">
            <h2 id="dialog-title">Дијалог</h2>
            <div id="dialog-message"></div>
            <div id="dialog-input-container" style="display: none;">
                <input type="text" id="dialog-input" placeholder="Внесете текст">
            </div>
            <!-- PR Submission Form -->
            <div id="pr-form-container" style="display: none;">
                <form id="pr-submission-form">
                    <div class="form-group">
                        <label for="pr-contributor">Ваши информации (опционално)</label>
                        <input type="text" id="pr-contributor" placeholder="Име или е-пошта">
                        <small class="form-help">Вашето име или контакт информации</small>
                    </div>
                    <div class="form-group">
                        <label for="pr-description">Опис на промените</label>
                        <textarea id="pr-description" placeholder="Опишете ги промените кои ги правите..." rows="3" required>Предлог промени од MMM формуларот</textarea>
                        <small class="form-help">Краток опис на промените</small>
                    </div>
                </form>
            </div>
            <div class="dialog-buttons">
                <button id="dialog-cancel-btn" class="dialog-btn cancel-btn">Откажи</button>
                <button id="dialog-confirm-btn" class="dialog-btn confirm-btn">Потврди</button>
                <button id="dialog-submit-btn" class="dialog-btn confirm-btn" style="display: none;">Поднеси PR</button>
            </div>
        </div>
    </div>
    <!-- Spotify Embed Player Modal -->
    <div id="spotify-embed-modal" class="modal spotify-modal">
        <div class="spotify-modal-content">
            <button class="spotify-modal-close" title="Затвори"><i class="fas fa-times"></i></button>
            <div id="spotify-embed-container"></div>
        </div>
    </div>
    <!-- Notification Area -->
    <div id="notification-area" class="notification-area"></div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="spotify-api.js"></script>
    <script src="script.js"></script>
</body>
</html>