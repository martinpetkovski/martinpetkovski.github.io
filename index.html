<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>najjak.com</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Audiowide&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fira Code:wght@400;700&display=swap" rel="stylesheet">
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>
	<style>
        @property --angle {
            syntax: '<angle>';
            initial-value: 0deg;
            inherits: false;
        }

        :root {
            --bg-dark: #050505;
            --panel-bg: #111;
            --text-main: #eee;
            --text-dim: #555;
            --accent: #ffffff;
            --accent-2: #ff003c;
            --accent-3: #eaff00;
            --shadow-color: #000;
            --depth: 8px;
        }

        @keyframes scanline {
            0% { background-position: 0% 0%; }
            100% { background-position: 0% 100%; }
        }

        @keyframes float {
            0% { transform: translateY(0px) rotateX(10deg); }
            50% { transform: translateY(-5px) rotateX(10deg); }
            100% { transform: translateY(0px) rotateX(10deg); }
        }

        @keyframes border-rotate {
            to { --angle: 360deg; }
        }

        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: perspective(1000px) translate3d(0, 40px, -50px) rotateX(-20deg); }
            to { opacity: 1; transform: perspective(1000px) translate3d(0, 0, 0) rotateX(0); }
        }

        @keyframes text-glow {
            0%, 100% { text-shadow: 3px 3px 0px #000, 0 0 20px rgba(255, 255, 255, 0.6); }
            50% { text-shadow: 3px 3px 0px #000, 0 0 30px rgba(255, 255, 255, 0.8), 0 0 10px rgba(100, 200, 255, 0.4); }
        }

        @keyframes shine {
            0% { left: -100%; opacity: 0; }
            20% { opacity: 1; }
            100% { left: 200%; opacity: 0; }
        }

        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -10;
        }

        #gradient-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -5;
            background: 
                radial-gradient(circle at 50% 0%, rgba(80, 120, 255, 0.15) 0%, transparent 60%),
                radial-gradient(circle at 0% 90%, rgba(255, 20, 80, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 100% 80%, rgba(100, 255, 200, 0.08) 0%, transparent 50%),
                linear-gradient(125deg, #020205 0%, #0a0a18 20%, #1a1025 40%, #0f202a 60%, #0a0a18 80%, #020205 100%);
            background-size: 300% 300%;
            animation: gradient-shift 20s ease infinite;
            filter: hue-rotate(var(--hue, 0deg));
            will-change: filter;
        }

        body {
            background-color: #050505;
            color: var(--text-main);
            font-family: 'Cinzel', serif;
            margin: 0;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }

        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='3.5' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.4'/%3E%3C/svg%3E");
            mix-blend-mode: overlay;
            opacity: 0.5;
        }

        #content-wrapper {
            padding: 20px 10px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            perspective: 1200px;
            transform-style: preserve-3d;
        }

        header {
            width: 100%;
            max-width: 500px;
            margin-bottom: 20px;
            text-align: center;
            transform-style: preserve-3d;
            animation: float 6s ease-in-out infinite;
        }

        h1 {
            margin: 0;
            font-family: 'Cinzel', serif;
            font-size: clamp(2rem, 13vw, 4.5rem);
            text-transform: uppercase;
            font-weight: 400;
            font-style: normal;
            letter-spacing: 2px;
            color: var(--text-main);
            text-shadow: 
                3px 3px 0px #000,
                0 0 20px rgba(255, 255, 255, 0.6);
            line-height: 1.1;
            transform: skewX(0deg);
            width: 100%;
            overflow-wrap: break-word;
            animation: text-glow 4s ease-in-out infinite;
        }

        header p {
            margin: 15px 0 0 0;
            color: #000;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-weight: bold;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            background: linear-gradient(135deg, #ffffff 0%, #cccccc 100%);
            display: inline-block;
            padding: 4px 12px;
            transform: skewX(-20deg);
            box-shadow: 5px 5px 0 rgba(0,0,0,0.5);
        }

        main {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
            max-width: 500px;
            transform-style: preserve-3d;
            padding-bottom: 20px;
        }

        section {
            position: relative;
            padding: 10px;
            background: transparent; /* Handled by ::after */
            transform-style: preserve-3d;
            transform: translateZ(0);
            /* No default border, handled by ::before */
            opacity: 0;
            animation: fadeInUp 1s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
            box-shadow: 0 20px 60px rgba(0,0,0,0.6);
        }

        section:nth-of-type(1) { animation-delay: 0.2s; }
        section:nth-of-type(2) { animation-delay: 0.4s; }
        section:nth-of-type(3) { animation-delay: 0.6s; }
        section:nth-of-type(4) { animation-delay: 0.8s; }
        section:nth-of-type(5) { animation-delay: 1.0s; }

        /* Border / Shine Container */
        section::before {
            content: '';
            position: absolute;
            inset: -1px; /* Outset border 1px */
            background: #222; 
            z-index: -2;
            /* Conic gradient: fade in, strong middle, fade out */
            background: conic-gradient(from var(--angle), transparent 0%, #ffffff 10%, #888888 20%, transparent 30%);
            animation: border-rotate 4s linear infinite;
            animation-play-state: paused;
        }

        /* Content Background */
        section::after {
            content: '';
            position: absolute;
            inset: 0; /* Fill the section */
            background: linear-gradient(160deg, #2a2a2a 0%, #111 40%, #050505 100%);
            box-shadow: inset 0 1px 0 rgba(255,255,255,0.1);
            z-index: -1;
        }

        section:hover::before {
            animation-play-state: running;
            box-shadow: none;
        }

        h2 {
            margin: 0 0 5px 0;
            font-family: 'Cinzel', serif;
            font-size: 1.2rem;
            text-transform: uppercase;
            font-style: normal;
            background: linear-gradient(to bottom, #ffffff, #bbbbbb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            padding: 0;
            display: block;
            text-align: left;
            box-shadow: none;
            /* Removed text-shadow to fix blur on transparent text */
            filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.3));
            transform: translateZ(10px);
            letter-spacing: 2px;
        }
        
        h2::after { content: none; }

        h3 {
            font-size: 0.65rem;
            background: linear-gradient(to bottom, #ffffff, #bbbbbb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-transform: uppercase;
            margin: 10px 0 5px 0;
            letter-spacing: 2px;
            border-bottom: 1px solid #3333;
            padding-bottom: 5px;
            text-align: left;
        }

        ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        li { margin: 0; }

        a.link {
            display: flex;
            flex-wrap: wrap;
            align-items: baseline;
            text-decoration: none;
            color: var(--text-main);
            
            /* Default State */
            background: linear-gradient(to bottom, #222, #111) padding-box;
            border: 1px solid transparent;
            border-left: 4px solid #333;
            
            padding: 6px 10px;
            transition: all 0.1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            z-index: 1;
            width: 100%;
            box-sizing: border-box;
            transform-style: preserve-3d;
            transform: perspective(1000px) translateZ(0);
            box-shadow: 
                0 4px 6px rgba(0,0,0,0.5),
                inset 0 1px 0 rgba(255,255,255,0.1);
        }

        a.link:hover {
            /* Hover State with Rotating Border */
            background: 
                radial-gradient(45px circle at var(--x) var(--y), rgba(255,255,255,0.12) 0%, transparent 100%) padding-box,
                linear-gradient(to bottom, #202020, #111) padding-box,
                radial-gradient(44px circle at var(--x) var(--y), rgba(255,255,255,0.72) 0%, transparent 100%) border-box,
                linear-gradient(to right, var(--accent-3) 4px, transparent 4px) border-box;
                
            border: 1px solid transparent;
            border-left-width: 4px;
            
            /* animation: border-rotate 4s linear infinite; */
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
            z-index: 10;
        }

        a.link:active {
            transform: perspective(1000px) translateZ(-2px) !important;
            background: linear-gradient(to bottom, #0a0a0a, #161616) padding-box;
            box-shadow: 
                0 1px 2px rgba(0,0,0,0.5),
                inset 0 2px 5px rgba(0,0,0,0.5);
            border-top: 1px solid transparent; /* Maintain layout */
            border-left-color: #555;
        }

        /* Shine Effect */
        a.link::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(to right, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%);
            transform: skewX(-25deg);
            z-index: 2;
            pointer-events: none;
        }

        a.link:hover::after {
            animation: shine 0.75s ease-in-out;
        }

        a.link .title {
            font-weight: bold;
            font-size: 0.9rem;
            margin-right: auto;
            display: flex;
            align-items: center;
            text-shadow: var(--shadow-x, 1px) var(--shadow-y, 1px) 2px rgba(0,0,0,0.8);
            z-index: 2;
            pointer-events: none;
            transform: translateZ(5px);
            transition: text-shadow 0.1s;
        }

        .favicon {
            width: 16px;
            height: 16px;
            margin-right: 8px;
            vertical-align: middle;
            border-radius: 2px;
            /* filter: grayscale(100%); removed for full color */
            transition: filter 0.2s;
        }
        a.link:hover .favicon {
            /* filter: grayscale(0%); removed */
        }

        a.link .year {
            font-size: 0.65rem;
            color: var(--text-dim);
            opacity: 0.8;
            margin-left: 10px;
            z-index: 2;
            text-shadow: var(--shadow-x, 1px) var(--shadow-y, 1px) 2px rgba(0,0,0,0.8);
            pointer-events: none;
            transform: translateZ(5px);
            transition: text-shadow 0.1s;
        }

        a.link .desc {
            font-size: 0.7rem;
            color: #aaa;
            width: 100%;
            white-space: normal;
            overflow: hidden;
            text-shadow: var(--shadow-x, 1px) var(--shadow-y, 1px) 2px rgba(0,0,0,0.8);
            pointer-events: none;
            line-height: 1.2;
            margin-top: 4px;
            transform: translateZ(2px);
            transition: text-shadow 0.1s;
        }

        /* Removed hover expand animation for desc */
        a.link:hover .desc {
            /* No change needed */
        }

        /* Compact list adjustments */
        .link-list.two-col {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .link-list.tags {
            flex-direction: row;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .link-list.tags li {
            flex: 1 1 auto;
        }

        .link-list.tags .link {
            justify-content: center;
            padding: 8px 12px;
        }

        .link-list.tags .title {
            margin: 0;
            justify-content: center;
            font-size: 0.85rem;
        }
        
        .link-list.tags .favicon {
            margin-right: 6px;
        }

        /* Removed media query for two columns to keep one link per row */

        footer {
            margin-top: 30px;
            color: var(--text-dim);
            font-size: 0.6rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.6;
            transform: skewX(-20deg);
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            background: var(--bg-dark);
        }
        ::-webkit-scrollbar-thumb {
            background: #333;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent);
        }

        /* Title SVG Styles */
        #title {
            width: 100%;
            max-width: 800px;
            margin: 0 auto 20px auto;
            position: relative;
            transform: skew(0deg); /* Reset skew from old design if needed, or keep it */
        }

        .text {
            fill: none;
            stroke-width: 1;
            stroke-linejoin: bevel;
            stroke-dasharray: 100 300;
            stroke-dashoffset: 0;
            animation: stroke 10s infinite cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-family: 'Audiowide', 'Cinzel', sans-serif;
            font-size: 120px;
            font-weight: bold;
        }

        .text:nth-child(5n + 1) {
            stroke: #0AF;
            filter: drop-shadow(0 0 8px #0AF);
            animation-delay: -1.0s;
        }

        .text:nth-child(5n + 2) {
            stroke: #0F0;
            filter: drop-shadow(0 0 8px #0F0);
            animation-delay: -2.0s;
        }

        .text:nth-child(5n + 3) {
            stroke: #FF0;
            filter: drop-shadow(0 0 8px #FF0);
            animation-delay: -3.0s;
        }

        .text:nth-child(5n + 4) {
            stroke: #F0F;
            filter: drop-shadow(0 0 8px #F0F);
            animation-delay: -4.0s;
        }

        .text:nth-child(5n + 5) {
            stroke: #F00;
            filter: drop-shadow(0 0 8px #F00);
            animation-delay: -5s;
        }

        @keyframes stroke {
            100% {
                stroke-dashoffset: -400;
            }
        }
        
        /* Music Section Styles */
        .albumCover {
            width: 48px;
            height: 48px;
            border-radius: 4px;
            margin-right: 10px;
            object-fit: cover;
        }
        
        #music-details {
            display: flex;
            flex-direction: column;
            justify-content: center;
            overflow: hidden;
        }
        
        #music-artist {
            font-size: 0.9rem;
            font-weight: bold;
            color: var(--text-main);
        }
        
        #music-track {
            font-size: 0.75rem;
            color: var(--text-dim);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .music-content {
            display: flex;
            align-items: center;
            width: 100%;
        }

        @media (max-width: 600px) {
            body { font-size: 23px; }
            h1 { font-size: 3.9rem; }
            h2 { font-size: 1.56rem; }
            h3 { font-size: 0.85rem; }
            header p { font-size: 1.05rem; }
            a.link .title { font-size: 1.17rem !important; }
            a.link .desc { font-size: 0.91rem !important; }
            a.link .year { font-size: 0.85rem !important; }
            .favicon { width: 21px; height: 21px; }
            #content-wrapper { padding: 26px 13px; }
            header { margin-bottom: 39px; }
            main { gap: 33px; max-width: 100%; }
            .link { padding: 16px 20px; }
        }
	</style>
</head>
<body>
    <div id="gradient-bg"></div>
    <div id="content-wrapper">
        <header>
            <div id="title">
                <svg viewBox="0 0 900 150">
                    <symbol id="s-text">
                        <text text-anchor="middle" x="50%" y="50%" dy=".35em">
                            NAJJAK.COM
                        </text>
                    </symbol>

                    <use xlink:href="#s-text" class="text"></use>
                    <use xlink:href="#s-text" class="text"></use>
                    <use xlink:href="#s-text" class="text"></use>
                    <use xlink:href="#s-text" class="text"></use>
                    <use xlink:href="#s-text" class="text"></use>
                </svg>
            </div>
            <p>Welcome to Martin Petkovski's personal website</p>
        </header>

        <main>
            <section aria-labelledby="resume-title">
                <ul class="link-list compact">
                    <li>
                        <a class="link" href="resume">
                            <span class="title">Professional resume</span>
                            <span class="year">2017 - present</span>
                            <span class="desc">Mostly engineering stuff in 3D space.</span>
                        </a>
                    </li>
                </ul>
            </section>

            <section aria-labelledby="powered-title">
                <h2 id="powered-title">My code has powered</h2>
                <ul class="link-list compact">
                    <li>
                        <a class="link" href="https://kamaikamai.com">
                            <span class="title">Sonder</span>
                            <span class="year">2015</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="https://www.huntshowdown.com/">
                            <span class="title">Hunt: Showdown</span>
                            <span class="year">2017 - 2018</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="https://www.youtube.com/watch?v=RahJZCrmUvg">
                            <span class="title">Black Diamond VR</span>
                            <span class="year">2018 - 2019</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="https://airportbriefing.aero/">
                            <span class="title">Airport Briefing</span>
                            <span class="year">2019 - 2020</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="https://www.starstable.com/">
                            <span class="title">Star Stable Online</span>
                            <span class="year">2020 - 2022</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="https://www.angelicthegame.com/">
                            <span class="title">Angelic</span>
                            <span class="year">2020 / 2022 - present</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="https://store.steampowered.com/app/1682400/The_Strange_Story_Of_Brian_Fisher_Chapter_2/">
                            <span class="title">Strange Story: Chapter 2</span>
                            <span class="year">2023</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="https://historikal.com/">
                            <span class="title">Historikal</span>
                            <span class="year">2025</span>
                        </a>
                    </li>
                </ul>
            </section>

            <section aria-labelledby="vault-title">
                <h2 id="vault-title">The Vault</h2>
                <h3>Handcrafted</h3>
                <ul class="link-list two-col">
                    <li>
                        <a class="link" href="siotojazz">
                            <span class="title">SIOTO JAZZ</span>
                            <span class="year">2022 - present</span>
                            <span class="desc">Alternative Rock band I'm playing in (guitar).</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="nst">
                            <span class="title">NST: Nonlinear System Tools</span>
                            <span class="year">2021 - 2023</span>
                            <span class="desc">My master's thesis: A tool for writing non-linear interactive narratives.</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="https://github.com/fiktedu/mkqr">
                            <span class="title">MKQR</span>
                            <span class="year">2021</span>
                            <span class="desc"> An open ðŸ‡²ðŸ‡° standard for financial transactions using QR codes. </span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="https://github.com/martinpetkovski/ImQuick">
                            <span class="title">ImQuick</span>
                            <span class="year">2021</span>
                            <span class="desc"> A single header ImGui library for separation of interface from logic.</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="https://www.reddit.com/r/MechanicalKeyboards/comments/vv35cr/gmmk_pro_build_qmk_and_hid_tips_tricks/">
                            <span class="title">Custom QMK Firmwares</span>
                            <span class="year">2022</span>
                            <span class="desc">I did fiddle with custom keyboard firmwares using QMK for a bit.</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="sis/index.html">
                            <span class="title">Sashe Ivanovski Simulator</span>
                            <span class="year">2020</span>
                            <span class="desc">Goofy project, generates swear words in Macedonian.</span>
                        </a>
                    </li>
                </ul>

                <h3>Vibecrafted</h3>
                <ul class="link-list two-col">
                    <li>
                        <a class="link" href="">
                            <span class="title">Automata Suite</span>
                            <span class="year">2025 - present</span>
                            <span class="desc">It's still a secret</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="JustNotepad">
                            <span class="title">Just Notepad</span>
                            <span class="year">2025 - present</span>
                            <span class="desc">Just a Notepad. 3Mb RAM with plugins support.</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="Checkmeg">
                            <span class="title">Checkmeg</span>
                            <span class="year">2020 / 2025 - present</span>
                            <span class="desc">Win32 utility tool for bookmarking literally anything.</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="VSCAdvancedSearch">
                            <span class="title">VSC Advanced Search</span>
                            <span class="year">2025 - present</span>
                            <span class="desc">Advanced search tool for Visual Studio Code.</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="masterlista">
                            <span class="title">Makedonska Muzicka Master Lista</span>
                            <span class="year">2025 - present</span>
                            <span class="desc">Comprehensive music database of Macedonian music.</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="makedonski">
                            <span class="title">Makedonski Leksikon</span>
                            <span class="year">2021 - present</span>
                            <span class="desc">All the words in the Macedonian language and more.</span>
                        </a>
                    </li>
                </ul>
            </section>

            <section aria-labelledby="opinions-title">
                <h2 id="opinions-title">Opinions</h2>
                <ul class="link-list two-col">
                    <li>
                        <a class="link" href="n/?principles">
                            <span class="title">Principles</span>
                            <span class="year">current</span>
                            <span class="desc">Core values and beliefs</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="n/?code-standard-cpp">
                            <span class="title">C++ Code Standard</span>
                            <span class="year">current</span>
                            <span class="desc">Personal coding guidelines and best practices</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="n/?zanaetchiski-raspored">
                            <span class="title">Zanaetchiski Raspored</span>
                            <span class="year">2021</span>
                            <span class="desc">Some thoughts on craftsman vs. manager schedules</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="n/?cyberpunk">
                            <span class="title">Cyberpunk</span>
                            <span class="year">2022</span>
                            <span class="desc">Review of the game</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="n/?nomanssky">
                            <span class="title">No Man's Sky</span>
                            <span class="year">2021</span>
                            <span class="desc">Review of the game</span>
                        </a>
                    </li>
                </ul>
            </section>

            <section aria-labelledby="music-title">
                <h2 id="music-title">Music</h2>
                <ul class="link-list compact">
                    <li>
                        <a class="link" id="musicLink" href="#">
                            <div class="music-content" id="music-listeningnow">
                                <span class="title">Loading...</span>
                            </div>
                        </a>
                    </li>
                    <li>
                        <a class="link" id="musicLinkHr" href="#">
                            <div class="music-content" id="music-heavyrotation">
                                <span class="title">Loading...</span>
                            </div>
                        </a>
                    </li>
                </ul>
            </section>

            <section aria-labelledby="links-title">
                <h2 id="links-title">Links</h2>
                <ul class="link-list two-col">
                    <li>
                        <a class="link" href="https://open.spotify.com/user/31mf67wrbng5tnj4lpgteudoygze">
                            <span class="title">Spotify</span>
                            <span class="year">---</span>
                            <span class="desc">Pesonal profile</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="https://www.youtube.com/channel/UCcbyTxWAorYwBVSq70vqBqQ/videos">
                            <span class="title">YouTube</span>
                            <span class="year">---</span>
                            <span class="desc">Video goofery</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="https://github.com/martinpetkovski">
                            <span class="title">GitHub</span>
                            <span class="year">---</span>
                            <span class="desc">Code repositories</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="https://www.linkedin.com/in/martin-petkovski/">
                            <span class="title">LinkedIn</span>
                            <span class="year">---</span>
                            <span class="desc">Professional network</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="https://twitter.com/misteriozen">
                            <span class="title">Twitter (misteriozen)</span>
                            <span class="year">---</span>
                            <span class="desc">Personal updates</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="https://twitter.com/OficialZaev">
                            <span class="title">Twitter (OficialZaev)</span>
                            <span class="year">---</span>
                            <span class="desc">Goofy account</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="https://www.instagram.com/najnajjak/">
                            <span class="title">Instagram (najnajjak)</span>
                            <span class="year">---</span>
                            <span class="desc">Semi-goofy acc</span>
                        </a>
                    </li>
                    <li>
                        <a class="link" href="mailto:martin@najjak.com">
                            <span class="title">Email</span>
                            <span class="year">---</span>
                            <span class="desc">Contact me directly</span>
                        </a>
                    </li>
                </ul>
            </section>
        </main>

        <footer>
            <p>Copyright Â© Martin Petkovski 2013-2026</p>
        </footer>
    </div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
        import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
        import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

        const canvas = document.querySelector('#bg-canvas');
        const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);

        const scene = new THREE.Scene();
        // Add subtle fog for depth
        scene.fog = new THREE.FogExp2(0x000000, 0.002);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 50;

        // Post-processing (Soft Bloom)
        const composer = new EffectComposer(renderer);
        const renderPass = new RenderPass(scene, camera);
        composer.addPass(renderPass);

        const bloomPass = new UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.5, 0.4, 0.85);
        bloomPass.threshold = 0.2;
        bloomPass.strength = 0.8; // Softer glow
        bloomPass.radius = 0.5;
        composer.addPass(bloomPass);

        // Particle System
        const particleCount = 2000;
        const geometry = new THREE.BufferGeometry();
        const positions = [];
        const speeds = [];

        for (let i = 0; i < particleCount; i++) {
            positions.push((Math.random() - 0.5) * 300); // x
            positions.push((Math.random() - 0.5) * 300); // y
            positions.push((Math.random() - 0.5) * 300); // z
            
            speeds.push(Math.random() * 0.02 + 0.005);
        }

        geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
        geometry.setAttribute('speed', new THREE.Float32BufferAttribute(speeds, 1));

        // Generate soft circle texture
        const getTexture = () => {
            const canvas = document.createElement('canvas');
            canvas.width = 32;
            canvas.height = 32;
            const ctx = canvas.getContext('2d');
            const grad = ctx.createRadialGradient(16, 16, 0, 16, 16, 16);
            grad.addColorStop(0, 'rgba(255, 255, 255, 1)');
            grad.addColorStop(1, 'rgba(255, 255, 255, 0)');
            ctx.fillStyle = grad;
            ctx.fillRect(0, 0, 32, 32);
            return new THREE.CanvasTexture(canvas);
        };

        const material = new THREE.PointsMaterial({
            color: 0xffffff,
            size: 1.5,
            map: getTexture(),
            transparent: true,
            opacity: 0.6,
            blending: THREE.AdditiveBlending,
            depthWrite: false
        });

        const particles = new THREE.Points(geometry, material);
        scene.add(particles);

        // Wireframe Cubes
        const cubes = [];
        const cubeGeometry = new THREE.BoxGeometry(10, 10, 10);
        const cubeMaterial = new THREE.LineBasicMaterial({ color: 0x444444, transparent: true, opacity: 0.15 });
        
        for (let i = 0; i < 12; i++) {
            const edges = new THREE.EdgesGeometry(cubeGeometry);
            const line = new THREE.LineSegments(edges, cubeMaterial);
            
            line.position.x = (Math.random() - 0.5) * 250;
            line.position.y = (Math.random() - 0.5) * 250;
            line.position.z = (Math.random() - 0.5) * 100 - 60; // Background
            
            line.rotation.x = Math.random() * Math.PI;
            line.rotation.y = Math.random() * Math.PI;
            
            // Store original Y for parallax
            line.userData = { 
                originalY: line.position.y,
                rotationSpeedX: (Math.random() - 0.5) * 0.005,
                rotationSpeedY: (Math.random() - 0.5) * 0.005
            };

            scene.add(line);
            cubes.push(line);
        }

        // Mouse interaction
        let mouseX = 0;
        let mouseY = 0;
        window.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX / window.innerWidth) * 2 - 1;
            mouseY = -(e.clientY / window.innerHeight) * 2 + 1;
        });

        let scrollY = 0;
        window.addEventListener('scroll', () => {
            scrollY = window.scrollY;
            const hue = scrollY * 0.1;
            const bg = document.getElementById('gradient-bg');
            if (bg) {
                bg.style.setProperty('--hue', `${hue}deg`);
            }
        });

        function animate() {
            requestAnimationFrame(animate);

            const positions = particles.geometry.attributes.position.array;
            const speeds = particles.geometry.attributes.speed.array;

            for (let i = 0; i < particleCount; i++) {
                // Gentle upward drift
                positions[i * 3 + 1] += speeds[i];

                // Reset if out of view
                if (positions[i * 3 + 1] > 150) {
                    positions[i * 3 + 1] = -150;
                }
            }
            particles.geometry.attributes.position.needsUpdate = true;

            // Gentle rotation of the whole system
            particles.rotation.y += 0.0005;
            
            // Mouse parallax
            particles.rotation.x += (mouseY * 0.05 - particles.rotation.x) * 0.01;
            particles.rotation.y += (mouseX * 0.05 - particles.rotation.y) * 0.01;

            // Animate Cubes
            cubes.forEach((cube) => {
                cube.rotation.x += cube.userData.rotationSpeedX;
                cube.rotation.y += cube.userData.rotationSpeedY;
                
                // Scroll Parallax & Rotation
                cube.position.y = cube.userData.originalY + scrollY * 0.05;
                cube.rotation.z = scrollY * 0.001;
            });

            composer.render();
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            composer.setSize(window.innerWidth, window.innerHeight);
        });

        // Scroll Color Shift (Moved to shared listener above)
        /* window.addEventListener('scroll', () => {
            const hue = window.scrollY * 0.1;
            const bg = document.getElementById('gradient-bg');
            if (bg) {
                bg.style.setProperty('--hue', `${hue}deg`);
            }
        }); */
    </script>
    <script>
        // Last.fm Fetching
        fetch("https://ws.audioscrobbler.com/2.0/", {
            method: "POST",
            body: new URLSearchParams({
                method: "user.getRecentTracks",
                user: "martinpetkovski",
                api_key: "d186251f2ae019335f832db01d96c2f9",
                format: "json"
            })
        })
        .then(response => response.json())
        .then(data => {
            const mostRecentTrack = data.recenttracks.track[0];
            const isPlaying = mostRecentTrack['@attr'] && mostRecentTrack['@attr'].nowplaying === 'true';
            const label = isPlaying ? 'NOW PLAYING' : 'LAST LISTENED';
            
            document.querySelector("#music-listeningnow").innerHTML = `
                <img class="albumCover" src="${mostRecentTrack.image[2]["#text"]}" alt="Album Art"/>
                <div id="music-details">
                    <div style="font-size: 0.65rem; color: var(--accent-3); font-weight: bold;">${label}</div>
                    <div id="music-artist">${mostRecentTrack.artist["#text"]}</div>
                    <div id="music-track">${mostRecentTrack.name}</div>
                </div>
            `;
            document.querySelector("#musicLink").href = mostRecentTrack.url;
        })
        .catch(err => {
            console.error("Last.fm error:", err);
            document.querySelector("#music-listeningnow").innerHTML = '<span class="title">Failed to load music data</span>';
        });

        fetch("https://ws.audioscrobbler.com/2.0/", {
            method: "POST",
            body: new URLSearchParams({
                method: "user.getTopAlbums",
                user: "martinpetkovski",
                api_key: "d186251f2ae019335f832db01d96c2f9",
                period: "1month",
                format: "json"
            })
        })
        .then(response => response.json())
        .then(data => {
            const most_listened_album = data.topalbums.album[0];
            document.querySelector("#music-heavyrotation").innerHTML = `
                <img class="albumCover" src="${most_listened_album.image[2]["#text"]}" alt="Album Art"/>
                <div id="music-details">
                    <div style="font-size: 0.65rem; color: var(--accent-2); font-weight: bold;">HEAVY ROTATION</div>
                    <div id="music-artist">${most_listened_album.artist.name}</div>
                    <div id="music-track">${most_listened_album.name}</div>
                </div>
            `;
            document.querySelector("#musicLinkHr").href = most_listened_album.url;
        })
        .catch(err => {
            console.error("Last.fm error:", err);
            document.querySelector("#music-heavyrotation").innerHTML = '<span class="title">Failed to load music data</span>';
        });

        // 3D Tilt Effect for Links
        document.querySelectorAll('.link').forEach(link => {
            link.addEventListener('mousemove', (e) => {
                const rect = link.getBoundingClientRect();
                const x = e.clientX - rect.left; // x position within the element.
                const y = e.clientY - rect.top;  // y position within the element.
                
                link.style.setProperty('--x', `${x}px`);
                link.style.setProperty('--y', `${y}px`);

                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                
                // Calculate rotation based on cursor position
                // Max rotation: 10 degrees
                const rotateX = ((y - centerY) / centerY) * -10; 
                const rotateY = ((x - centerX) / centerX) * 10;
                
                link.style.transform = `perspective(1000px) translateZ(20px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;

                // Shadow calculation (opposite to cursor)
                // If cursor is top-left (-x, -y), shadow should be bottom-right (+x, +y)
                const shadowX = ((x - centerX) / centerX) * -4; // Max 4px offset
                const shadowY = ((y - centerY) / centerY) * -4;
                
                link.style.setProperty('--shadow-x', `${shadowX}px`);
                link.style.setProperty('--shadow-y', `${shadowY}px`);
            });
            
            link.addEventListener('mouseleave', () => {
                // Reset transform
                link.style.transform = 'perspective(1000px) translateZ(0) rotateX(0) rotateY(0)';
                link.style.setProperty('--shadow-x', '1px');
                link.style.setProperty('--shadow-y', '1px');
            });
        });

        // Inject Favicons
        const iconConfig = {
            'instagram': 'https://www.instagram.com',
            'mailto:': 'ðŸ“§',
            'resume': 'https://www.najjak.com/favicon.ico',
            'siotojazz': 'https://siotojazz.com/truestate/favicon.ico',
            'nst': 'nst/docs/favicon.ico',
            'sis': 'sis/favicon.ico',
            'justnotepad': 'https://www.najjak.com/favicon.ico',
            'checkmeg': 'archive/checkmeg/favicon.ico',
            'masterlista': 'https://www.najjak.com/favicon.ico',
            'makedonski': 'https://www.najjak.com/favicon.ico',
            'principles': 'n/docs/assets/images/favicon.png',
            'code-standard-cpp': 'n/docs/assets/images/favicon.png',
            'zanaetchiski-raspored': 'n/docs/assets/images/favicon.png',
            'eats': 'archive/eats/logo.png',
            'photos': 'photos/thumbnails/DSC00089.JPG',
            'familytree': 'ðŸŒ³',
            'cyberpunk': 'https://www.cyberpunk.net/us/en/',
            'nomanssky': 'https://www.nomanssky.com/',
            'deezer': 'https://deezer.com',
            'spotify': 'https://spotify.com',
            'youtube': 'https://youtube.com',
            'github': 'https://github.com',
            'linkedin': 'https://linkedin.com',
            'twitter': 'https://twitter.com',
        };

        const fallbackIcon = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23555'%3E%3Ccircle cx='12' cy='12' r='4'/%3E%3C/svg%3E";

        document.querySelectorAll('a.link').forEach(link => {
            const href = link.getAttribute('href');
            let iconUrl = null;

            // Check config
            for (const [key, value] of Object.entries(iconConfig)) {
                if (href.toLowerCase().includes(key)) {
                    // Check if it looks like a path or URL (contains / or .)
                    if (value.includes('/') || value.includes('.') || value.startsWith('http')) {
                        if (value.match(/\.(jpeg|jpg|gif|png|svg|ico)$/i)) {
                            iconUrl = value; // Direct image
                        } else {
                            // Website URL - fetch favicon
                            try {
                                const url = new URL(value);
                                iconUrl = `https://www.google.com/s2/favicons?domain=${url.hostname}&sz=32`;
                            } catch (e) {
                                console.warn('Invalid URL in config:', value);
                            }
                        }
                    } else {
                        // It's an emoji/text - convert to SVG data URI
                        const svgString = `<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>${value}</text></svg>`;
                        iconUrl = `data:image/svg+xml,${encodeURIComponent(svgString)}`;
                    }
                    break; // Stop after first match
                }
            }
            
            // If no config match found, and it's an external link, try to fetch favicon from href
            if (!iconUrl && href.startsWith('http')) {
                 try {
                    const url = new URL(href);
                    iconUrl = `https://www.google.com/s2/favicons?domain=${url.hostname}&sz=32`;
                } catch (e) {
                    // Ignore
                }
            }
            
            // Final fallback
            if (!iconUrl) {
                iconUrl = fallbackIcon;
            }
            
            const title = link.querySelector('.title');
            if (title) {
                const img = document.createElement('img');
                img.className = 'favicon';
                img.src = iconUrl;
                img.onerror = () => {
                    if (img.src !== fallbackIcon) {
                        img.src = fallbackIcon;
                    }
                };
                title.prepend(img);
            }
        });
    </script>
</body>

</html>
